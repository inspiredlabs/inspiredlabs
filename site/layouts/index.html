<style>
  .carousel {
  /* background: #383838; */
}

/* fade in image when loaded */
.carousel-cell {  
  /*margin-right: 10px */;
  background: darkcyan;
  counter-increment: carousel-cell;
  transition: opacity 0.4s;
}

.carousel-cell.flickity-bg-lazyloaded,
.carousel-cell.flickity-lazyerror {
  opacity: 1;
}

.carousel-nav .carousel-cell {  
  /*margin-right: 10px */;
  background: darkgreen;
  counter-increment: carousel-cell;  
}

/* cell number */
.carousel-cell:before {
  display: block;
  text-align: center;
  content: counter(carousel-cell);
  /* line-height: 5rem; */
  /* font-size: 5rem; */
  color: white;
}
 
  button[aria-expanded="true"] {
  /* https://codepen.io/inspiredlabs/pen/ydadxB
  box-shadow: inset 5px 5px #999;
  background: #ddd; 
  color: white;
  */
  
}

#menu {
  background: #eee;
  font-size: 2em;
  padding: 1em;
  border: 1px solid #999;
  margin-top: 0.5em;
  max-width: 20em;
  -webkit-animation-duration: 3s;
  animation-duration: 3s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both; /* */
}

@keyframes fadeInOut {
   0% {opacity: 0;}
   100% {opacity: 1;}
} 

@-webkit-keyframes fadeInOut {
  0% {opacity: 0;}
  100% {opacity: 1;}
}

.fadeInOut {
  -webkit-animation-name: fadeInOut;
  animation-name: fadeInOut;
} /* https://www.tutorialspoint.com/css/css_animation_fade_in.htm */

.carousel-nav .carousel-cell.is-nav-selected {
  border-color: white;
}
</style>


<aside class="fadeInOut w-100 vw-100 top-0 left-0 absolute z-9999 debug" id="menu" aria-expanded="false">

  <button
    class="bn bg-transparent button-reset light-gray fr w-10 right-0 top-0 fixed z-max f-headline ts1-dark-gray pointer"
    id="menuClose" style="display:inline-block">Ã—</button><!-- https://codepen.io/inspiredlabs/pen/ydadxB -->
  
  <div class="w-50 fixed z-2 mt0 pa1 top-0 z-2">
    <a href="#cell01">Cell 1</a>,
    <a href="#cell02">Cell 2</a>,
    <a href="#cell03">Cell 3</a>,
    <a href="#cell04">Cell 4</a>,
    <a href="#cell05">Cell 5</a>
  </div>

  <div class="carousel carousel-nav bg-transparent bn ma0 pa0 h5 w-100 bottom-0 left-0 z-3 absolute fixed" ><!-- data-flickity='{ "asNavFor": ".carousel-main", "contain": true, "pageDots": false, "prevNextButtons": false }' h3 h3-ns h3-m h3-l -->
    <div class="carousel-cell ba bw1 b--moon-gray w-10 top-0 ma0 pa0 h4 pointer" for="cell01"></div>
    <div class="carousel-cell ba bw1 b--moon-gray w-10 top-0 ma0 pa0 h4 pointer" for="cell02"></div>
    <div class="carousel-cell ba bw1 b--moon-gray w-10 top-0 ma0 pa0 h4 pointer" for="cell03"></div>
    <div class="carousel-cell ba bw1 b--moon-gray w-10 top-0 ma0 pa0 h4 pointer" for="cell04"></div>
    <div class="carousel-cell ba bw1 b--moon-gray w-10 top-0 ma0 pa0 h4 pointer" for="cell05"></div>
  </div>




  <!-- Flickity HTML init -->
  <div class="carousel carousel-main bg-charcoal top-0 left-0 fixed w-100 vw-100 h-100 vh-100 z-1" ><!-- data-flickity='{ "prevNextButtons": false, "pageDots": false, "wrapAround": true, "contain": true, "hash": true,
  "bgLazyLoad": true }' -->
    
    <div class="carousel-cell w-100 vh-100 cover o-0" id="cell01"
     data-flickity-bg-lazyload="https://unsplash.it/640/480/?random"></div>
    
    <div class="carousel-cell w-100 vh-100" id="cell02"></div>
    <div class="carousel-cell w-100 vh-100" id="cell03"></div>
    <div class="carousel-cell w-100 vh-100" id="cell04"></div>
    <div class="carousel-cell w-100 vh-100" id="cell05"></div>
  </div>
</aside>



{{ .Render "list" }}
  

<script src="{{ .Site.BaseURL | absURL }}js/flickity.js"></script>

<style>
  .static {
    -webkit-overflow-scrolling: touch;
    -ms-overflow-style: none;
    overflow: hidden;
  }
</style>

<script>
  const static = function () {
    document.ontouchmove = function (e) {
      e.preventDefault()
    };
    document.documentElement.className += 'static';
  };
  
  const scrolling = function () {
    document.ontouchmove = function (e) {
      e.enableDefault()
    };
    document.documentElement.className = document.documentElement.className.replace(/(?:^|\s)static(?!\S)/g, '');
  };
</script>

<script>
  // Store togglable elements
  const toggleButton = document.getElementById('menu-toggle');
  const menu = document.getElementById('menu');

  // Two discreet functions
  let expanded = true;
  function toggleMenu() {
    if (expanded == true) {
      //do...
      scrolling();
      closeMenu();
    } else if (expanded == false) {
      //do...
      static();
      showMenu();
    } return;
  }

  // The menu is NOT expanded, so...
  function showMenu() {
    menu.toggleAttribute('hidden', false);

    setTimeout(function () {

      toggleButton.toggleAttribute('aria-expanded', true);
      expanded = true;
    }, 10);
  };//showMenu()

  // The menu IS expanded, so...
  function closeMenu() {

    toggleButton.toggleAttribute('aria-expanded', false);

    setTimeout(function () {
      menu.toggleAttribute('hidden', true);
      expanded = false;
    }, 0);
  }//closeMenu()


  // Attach click handler to toggle
  toggleButton.addEventListener('click', (e) => {
    toggleMenu();
    //return;
  });

  

</script>


<script>
  // Store toggle and menu elements
  
  const menuClose = document.getElementById('menuClose');
  // Attach click handler to toggle
  menuClose.addEventListener('click', (e) => {
    toggleMenu();
  });  
</script>

<script>

  

    document.onkeydown = function(e) {
      e = e || window.event;
      var isEscape = false;
      if ('key' in e) {
        isEscape = (e.key == 'Escape' || e.key == 'Esc');
      } else {
        isEscape = (e.keyCode == 27);
      }
      if (isEscape) {
        //do...
        scrolling();
        closeMenu();
      }
    };
  
  
  
</script>

<script>
  var carousel = document.querySelector('.carousel');

  var flickity = new Flickity('.carousel-main', {
    hash: true,
    contain: true,
    pageDots: false,
    wrapAround: true,
    bgLazyLoad: true,
    prevNextButtons: false
  });
  var nav = new Flickity('.carousel-nav', {
    asNavFor: '.carousel-main',
    contain: true,
    pageDots: false
  });

</script>

<script>
  
  /* var flkty = new Flickity('.portfolio', {
    wrapAround: true,
    pageDots: true
  });
  
  var buttonGroup = document.querySelector('.portfolio-btn');
  buttonGroup.addEventListener('click', function (event) {
    if (!matchesSelector(event.target, 'a')) {
      return;
    }

    function switchCell(Pause) {
      setTimeout(function () {
        var selector = event.target.getAttribute('data-selector');
        flkty.selectCell(selector);
      }, Pause);
    }
    switchCell(450);
  }); */

  

  window.addEventListener('orientationchange', function () {
    var originalBodyStyle = getComputedStyle(document.body).getPropertyValue('display');
    document.body.style.display = 'none';
    setTimeout(function () {
      document.body.style.display = originalBodyStyle;
    }, 10);
  });
  
  //stackoverflow.com/questions/12119107/prevent-javascript-function-from-firing-multiple-times add mouseover.

/*   document.addEventListener('DOMContentLoaded', function (event) {
    var _selector = document.querySelector('input[type=checkbox]#togglebox');
    _selector.addEventListener('change', function (event) {
      if (_selector.checked) {
        static();
      } else {
        scrolling();
      }
    });
  }); */
  
  
  
</script>

<style>
  @media all and (orientation:portrait) {
    .flickity-viewport {
      height: 100vh !important;
    }
  }

  @media all and (orientation:landscape) {
    .flickity-viewport {
      height: 100vh !important;
    }
  }
</style>

<!--script>
  if (navigator.vendor != null && navigator.vendor.match(/Apple Computer, Inc./) && navigator.userAgent.match(/iPhone/i) || (navigator.userAgent.match(/iPod/i))) {

    //alert("Ipod or Iphone");             
    document.getElementById("facetime").classList.add("visible");			//add
    document.getElementById("facetime").classList.remove("hidden");	//remove

    document.getElementById("vcard").classList.add("hidden");			//add
    document.getElementById("vcard").classList.remove("visible");	//remove

  }

  else if (navigator.vendor != null && navigator.vendor.match(/Apple Computer, Inc./) && navigator.userAgent.match(/iPad/i)) {

    //alert("Ipad");
    document.getElementById("facetime").classList.add("visible");			//add
    document.getElementById("facetime").classList.remove("hidden");	//remove

    document.getElementById("vcard").classList.add("hidden");			//add
    document.getElementById("vcard").classList.remove("visible");	//remove

  }

  else if (navigator.vendor != null && navigator.vendor.match(/Apple Computer, Inc./) && navigator.userAgent.indexOf('Safari') != -1) {

    //alert("Safari");
    //document.getElementById("offcanvas-menu").classList.add("vanilla");			//add
    //document.getElementById("offcanvas-menu").classList.remove('iOS');	//remove

  }

  else if (navigator.vendor == null || navigator.vendor != null) {

    //alert("Not Apple Based Browser");
    //document.getElementById("offcanvas-menu").classList.add("vanilla");			//add
    //document.getElementById("offcanvas-menu").classList.remove('iOS');	//remove

  }
</script-->

<script>
  (function () {
    // IIFE
    scrolling();
    closeMenu();
  })();
</script>