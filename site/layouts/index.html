<style>
  .carousel {
  /* background: #383838; */
}

/* fade in image when loaded */
.carousel-cell {  
  margin-right: /* 10px */;
  background: darkcyan;
  counter-increment: carousel-cell;
  transition: opacity 0.4s;
  
}



.carousel-cell.flickity-bg-lazyloaded,
.carousel-cell.flickity-lazyerror {
  opacity: 1;
}

.carousel-nav .carousel-cell {  
  margin-right: /* 10px */;
  background: darkgreen;
  counter-increment: carousel-cell;
  border:2px solid red ;
}

/* cell number */
.carousel-cell:before {
  display: block;
  text-align: center;
  content: counter(carousel-cell);
  line-height: 5rem;
  font-size: 5rem;
  color: white;
}


 
  button[aria-expanded="true"] {
  /* https://codepen.io/inspiredlabs/pen/ydadxB
  box-shadow: inset 5px 5px #999;
  background: #ddd; 
  color: white;
  */
  
}


#menu {
  background: #eee;
  font-size: 2em;
  padding: 1em;
  border: 1px solid #999;
  margin-top: 0.5em;
  max-width: 20em;
  -webkit-animation-duration: 3s;
  animation-duration: 3s;
  -webkit-animation-fill-mode: both;
  animation-fill-mode: both;

}

@keyframes fadeInOut {
   0% {opacity: 0;}
   100% {opacity: 1;}
} 

@-webkit-keyframes fadeInOut {
  0% {opacity: 0;}
  100% {opacity: 1;}
}

.fadeInOut {
  -webkit-animation-name: fadeInOut;
  animation-name: fadeInOut;
} /* https://www.tutorialspoint.com/css/css_animation_fade_in.htm */
</style>


<aside class="fadeInOut w-100 vw-100 top-0 left-0 absolute z-max debug" id="menu">

  <button class="bn bg-transparent button-reset light-gray fr w-10 right-0 top-0 fixed z-9999 f-headline ts1-dark-gray pointer" id="menuClose" style="display:inline-block">Ã—</button><!-- https://codepen.io/inspiredlabs/pen/ydadxB -->
  
  <div class="w-50 fixed z-2 mt0 pa1 top-0 z-2">
    <a href="#cell1">Cell 1</a>,
    <a href="#cell2">Cell 2</a>,
    <a href="#cell3">Cell 3</a>,
    <a href="#cell4">Cell 4</a>,
    <a href="#cell5">Cell 5</a>
  </div>

  <div class="carousel carousel-nav bg-transparent bn h4 w-100 bottom-0 left-0 z-3 absolute fixed" data-flickity='{ "asNavFor": ".carousel-main", "contain": true, "pageDots": false, "prevNextButtons": false }'><!-- h3 h3-ns h3-m h3-l -->
    <div class="carousel-cell w-10 pointer"></div>
    <div class="carousel-cell w-10 pointer"></div>
    <div class="carousel-cell w-10 pointer"></div>
    <div class="carousel-cell w-10 pointer"></div>
    <div class="carousel-cell w-10 pointer"></div>
  </div>

  <!-- Flickity HTML init -->
  <div class="carousel carousel-main bg-charcoal top-0 left-0 fixed w-100 vw-100 h-100 vh-100 z-1" data-flickity='{ "prevNextButtons": false, "pageDots": false, "wrapAround": true, "contain": true, "hash": true, "bgLazyLoad": true }'>
    
    <div class="carousel-cell w-100 vh-100 cover o-0" data-flickity-bg-lazyload="https://unsplash.it/640/480/?random"></div>

    <div class="carousel-cell w-100 vh-100" id="cell1"></div>
    <div class="carousel-cell w-100 vh-100" id="cell2"></div>
    <div class="carousel-cell w-100 vh-100" id="cell3"></div>
    <div class="carousel-cell w-100 vh-100" id="cell4"></div>
    <div class="carousel-cell w-100 vh-100" id="cell5"></div>
  </div>
</aside>

{{ .Render "list" }}

<script src="{{ .Site.BaseURL | absURL }}js/flickity.js"></script>

<style>
  .static {
    -webkit-overflow-scrolling: touch;
    -ms-overflow-style: none;
    overflow: hidden;
  }
</style>

<script>
  const static = function () {
    document.ontouchmove = function (e) {
      e.preventDefault()
    };
    document.documentElement.className += 'static';
  };
  
  const scrolling = function () {
    document.ontouchmove = function (e) {
      e.enableDefault()
    };
    document.documentElement.className = document.documentElement.className.replace(/(?:^|\s)static(?!\S)/g, '');
  };
</script>

<script>
  // Store toggle and menu elements
  
  const menuClose = document.getElementById('menuClose');
  const menuOpen = document.getElementById('menuOpen');
  const menu = document.getElementById('menu');


  const toggleMenu = function (e) {
    // Get current expanded value and force to boolean
    const expanded = menuOpen.getAttribute('aria-expanded') === 'true' ? true : false;

    // Set new expanded value
    menuOpen.setAttribute('aria-expanded', !expanded);
    // Show/hide menu
    menu.toggleAttribute('hidden', expanded);

    if (menuOpen.aria-expanded === true) {
      /* static(); */
      alert('hello')
    } return;
  };

  // Attach click handler to toggle
  menuClose.addEventListener('click', (e) => {
    toggleMenu();
    scrolling();
  });

  // Attach click handler to toggle
  menuOpen.addEventListener('click', (e) => {
    toggleMenu();
    static();
  });

  
</script>

<script>

  

    document.onkeydown = function(e) {
      e = e || window.event;
      var isEscape = false;
      if ('key' in e) {
        isEscape = (e.key == 'Escape' || e.key == 'Esc');
      } else {
        isEscape = (e.keyCode == 27);
      }
      if (isEscape) {
        toggleMenu();
        scrolling();
      }
    };
  
  
  
</script>

<script>
  
  /* var flkty = new Flickity('.portfolio', {
    wrapAround: true,
    pageDots: true
  });
  
  var buttonGroup = document.querySelector('.portfolio-btn');
  buttonGroup.addEventListener('click', function (event) {
    if (!matchesSelector(event.target, 'a')) {
      return;
    }

    function switchCell(Pause) {
      setTimeout(function () {
        var selector = event.target.getAttribute('data-selector');
        flkty.selectCell(selector);
      }, Pause);
    }
    switchCell(450);
  }); */

  

  window.addEventListener('orientationchange', function () {
    var originalBodyStyle = getComputedStyle(document.body).getPropertyValue('display');
    document.body.style.display = 'none';
    setTimeout(function () {
      document.body.style.display = originalBodyStyle;
    }, 10);
  });
  
  //stackoverflow.com/questions/12119107/prevent-javascript-function-from-firing-multiple-times add mouseover.

/*   document.addEventListener('DOMContentLoaded', function (event) {
    var _selector = document.querySelector('input[type=checkbox]#togglebox');
    _selector.addEventListener('change', function (event) {
      if (_selector.checked) {
        static();
      } else {
        scrolling();
      }
    });
  }); */
  
  
  
</script>

<style>
  @media all and (orientation:portrait) {
    .flickity-viewport {
      height: 100vh !important;
    }
  }

  @media all and (orientation:landscape) {
    .flickity-viewport {
      height: 100vh !important;
    }
  }
</style>

<!--script>
  if (navigator.vendor != null && navigator.vendor.match(/Apple Computer, Inc./) && navigator.userAgent.match(/iPhone/i) || (navigator.userAgent.match(/iPod/i))) {

    //alert("Ipod or Iphone");             
    document.getElementById("facetime").classList.add("visible");			//add
    document.getElementById("facetime").classList.remove("hidden");	//remove

    document.getElementById("vcard").classList.add("hidden");			//add
    document.getElementById("vcard").classList.remove("visible");	//remove

  }

  else if (navigator.vendor != null && navigator.vendor.match(/Apple Computer, Inc./) && navigator.userAgent.match(/iPad/i)) {

    //alert("Ipad");
    document.getElementById("facetime").classList.add("visible");			//add
    document.getElementById("facetime").classList.remove("hidden");	//remove

    document.getElementById("vcard").classList.add("hidden");			//add
    document.getElementById("vcard").classList.remove("visible");	//remove

  }

  else if (navigator.vendor != null && navigator.vendor.match(/Apple Computer, Inc./) && navigator.userAgent.indexOf('Safari') != -1) {

    //alert("Safari");
    //document.getElementById("offcanvas-menu").classList.add("vanilla");			//add
    //document.getElementById("offcanvas-menu").classList.remove('iOS');	//remove

  }

  else if (navigator.vendor == null || navigator.vendor != null) {

    //alert("Not Apple Based Browser");
    //document.getElementById("offcanvas-menu").classList.add("vanilla");			//add
    //document.getElementById("offcanvas-menu").classList.remove('iOS');	//remove

  }
</script-->

<script>
  (function () {
    // IIFE //toggleMenu();
    //alert('ciao')
    static();
  })();
</script>